#!/usr/bin/env perl

use File::Basename;
use Rex::ShellExtension;

my $command = "run";

my $r = Rex::ShellExtension->new;

my $exit_code = 0;

my $call_cmd = basename($0);
my ($cmd) = ($call_cmd =~ m/^rex\-(.*)$/);

if($cmd eq "command") {
   print STDERR "You can't call this command directly.\n";
   exit 1;
}

unshift @ARGV, $cmd;

print "" . $r->call($command, join_argv => " ") . "\n";

exit $?;
